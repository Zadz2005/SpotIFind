{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./ArtistDetailsPage.css';import{fetchCountries,fetchArtistDetails}from'../utils/apiConfig';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ArtistDetailsPage=_ref=>{let{artist,country,onBack}=_ref;const[artistDetails,setArtistDetails]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{loadArtistDetails();},[artist]);const cleanArtistName=artistName=>{// Remove text after \" - \" (dash surrounded by spaces)\nreturn artistName.split(' - ')[0].trim();};const loadArtistDetails=async()=>{try{setLoading(true);setError(null);// Test backend connectivity first\nconsole.log('Testing backend connectivity...');try{await fetchCountries();console.log('Backend connectivity test passed');}catch(error){console.error('Backend connectivity test failed:',error);setError('Cannot connect to backend server. Please check if the backend is running.');setLoading(false);return;}const cleanedArtistName=cleanArtistName(artist);console.log('Loading artist details for:',cleanedArtistName);// Get all artist details first\nconsole.log('Fetching all artist details...');let allArtistDetails;try{allArtistDetails=await fetchArtistDetails();console.log('All artist details received:',allArtistDetails);}catch(allError){console.error('Error fetching all artist details:',allError);setError(\"Failed to load artist details: \".concat(allError.message));setLoading(false);return;}// Filter for the specific artist\nconst filteredDetails=allArtistDetails.filter(detail=>{var _detail$id;const detailArtistName=detail.artistName||detail.artist||((_detail$id=detail.id)===null||_detail$id===void 0?void 0:_detail$id.artistName);return detailArtistName&&detailArtistName.toLowerCase().includes(cleanedArtistName.toLowerCase());});console.log('Filtered artist details:',filteredDetails);if(filteredDetails.length===0){setError(\"No songs found for \\\"\".concat(cleanedArtistName,\"\\\". Please check the artist name.\"));}else{setArtistDetails(filteredDetails);}}catch(error){console.error('Error loading artist details:',error);setError(\"Failed to load artist details: \".concat(error.message));}finally{setLoading(false);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"artist-details-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loading-spinner\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{className:\"loading-text\",children:\"Loading artist details...\"})]})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"artist-details-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"error-message\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-exclamation-triangle\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Error\"}),/*#__PURE__*/_jsx(\"p\",{children:error}),/*#__PURE__*/_jsxs(\"button\",{onClick:onBack,className:\"back-btn\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-arrow-left\"}),\"Go Back\"]})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"artist-details-page\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"header\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:onBack,className:\"back-btn\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-arrow-left\"}),\"Back to Artists\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"artist-info\",children:[/*#__PURE__*/_jsx(\"h1\",{children:cleanArtistName(artist)}),/*#__PURE__*/_jsxs(\"p\",{className:\"country-subtitle\",children:[\"from \",country]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"content\",children:/*#__PURE__*/_jsx(\"div\",{className:\"songs-grid\",children:artistDetails.map((detail,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"song-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"song-info\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"song-title\",children:detail.title||'Unknown Song'}),/*#__PURE__*/_jsx(\"p\",{className:\"song-artist\",children:detail.artistName||detail.artist||'Unknown Artist'}),/*#__PURE__*/_jsx(\"p\",{className:\"song-country\",children:detail.countryName||detail.country||'Unknown Country'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"song-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Streams:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-value\",children:detail.streams?new Intl.NumberFormat().format(detail.streams):'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Rank:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-value\",children:detail.rank||detail.countryRank||'N/A'})]})]})]},index))})})]});};export default ArtistDetailsPage;","map":{"version":3,"names":["React","useState","useEffect","fetchCountries","fetchArtistDetails","jsx","_jsx","jsxs","_jsxs","ArtistDetailsPage","_ref","artist","country","onBack","artistDetails","setArtistDetails","loading","setLoading","error","setError","loadArtistDetails","cleanArtistName","artistName","split","trim","console","log","cleanedArtistName","allArtistDetails","allError","concat","message","filteredDetails","filter","detail","_detail$id","detailArtistName","id","toLowerCase","includes","length","className","children","onClick","map","index","title","countryName","streams","Intl","NumberFormat","format","rank","countryRank"],"sources":["C:/Users/zahid/Downloads/Spot-I-Find/Spot-I-Find/spot-i-find-frontend/src/components/ArtistDetailsPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './ArtistDetailsPage.css';\nimport { fetchCountries, fetchArtistDetails } from '../utils/apiConfig';\n\nconst ArtistDetailsPage = ({ artist, country, onBack }) => {\n  const [artistDetails, setArtistDetails] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    loadArtistDetails();\n  }, [artist]);\n\n  const cleanArtistName = (artistName) => {\n    // Remove text after \" - \" (dash surrounded by spaces)\n    return artistName.split(' - ')[0].trim();\n  };\n\n  const loadArtistDetails = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      // Test backend connectivity first\n      console.log('Testing backend connectivity...');\n      try {\n        await fetchCountries();\n        console.log('Backend connectivity test passed');\n      } catch (error) {\n        console.error('Backend connectivity test failed:', error);\n        setError('Cannot connect to backend server. Please check if the backend is running.');\n        setLoading(false);\n        return;\n      }\n\n      const cleanedArtistName = cleanArtistName(artist);\n      console.log('Loading artist details for:', cleanedArtistName);\n\n      // Get all artist details first\n      console.log('Fetching all artist details...');\n      let allArtistDetails;\n      try {\n        allArtistDetails = await fetchArtistDetails();\n        console.log('All artist details received:', allArtistDetails);\n      } catch (allError) {\n        console.error('Error fetching all artist details:', allError);\n        setError(`Failed to load artist details: ${allError.message}`);\n        setLoading(false);\n        return;\n      }\n\n      // Filter for the specific artist\n      const filteredDetails = allArtistDetails.filter(detail => {\n        const detailArtistName = detail.artistName || detail.artist || detail.id?.artistName;\n        return detailArtistName && detailArtistName.toLowerCase().includes(cleanedArtistName.toLowerCase());\n      });\n\n      console.log('Filtered artist details:', filteredDetails);\n\n      if (filteredDetails.length === 0) {\n        setError(`No songs found for \"${cleanedArtistName}\". Please check the artist name.`);\n      } else {\n        setArtistDetails(filteredDetails);\n      }\n    } catch (error) {\n      console.error('Error loading artist details:', error);\n      setError(`Failed to load artist details: ${error.message}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"artist-details-page\">\n        <div className=\"loading-spinner\">\n          <div className=\"spinner\"></div>\n          <p className=\"loading-text\">Loading artist details...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"artist-details-page\">\n        <div className=\"error-message\">\n          <i className=\"fas fa-exclamation-triangle\"></i>\n          <h3>Error</h3>\n          <p>{error}</p>\n          <button onClick={onBack} className=\"back-btn\">\n            <i className=\"fas fa-arrow-left\"></i>\n            Go Back\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"artist-details-page\">\n      <header className=\"header\">\n        <button onClick={onBack} className=\"back-btn\">\n          <i className=\"fas fa-arrow-left\"></i>\n          Back to Artists\n        </button>\n        <div className=\"artist-info\">\n          <h1>{cleanArtistName(artist)}</h1>\n          <p className=\"country-subtitle\">from {country}</p>\n        </div>\n      </header>\n\n      <div className=\"content\">\n        <div className=\"songs-grid\">\n          {artistDetails.map((detail, index) => (\n            <div key={index} className=\"song-card\">\n              <div className=\"song-info\">\n                <h3 className=\"song-title\">\n                  {detail.title || 'Unknown Song'}\n                </h3>\n                <p className=\"song-artist\">\n                  {detail.artistName || detail.artist || 'Unknown Artist'}\n                </p>\n                <p className=\"song-country\">\n                  {detail.countryName || detail.country || 'Unknown Country'}\n                </p>\n              </div>\n              <div className=\"song-stats\">\n                <div className=\"stat\">\n                  <span className=\"stat-label\">Streams:</span>\n                  <span className=\"stat-value\">\n                    {detail.streams ? new Intl.NumberFormat().format(detail.streams) : 'N/A'}\n                  </span>\n                </div>\n                <div className=\"stat\">\n                  <span className=\"stat-label\">Rank:</span>\n                  <span className=\"stat-value\">\n                    {detail.rank || detail.countryRank || 'N/A'}\n                  </span>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ArtistDetailsPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}